<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">
<script src = "../js/jquery-3.7.1.min.js"></script>
<script>

 obarrproc =()=>{
	fetch("../0117/obarr.jsp")
	.then(resp =>{
		return resp.json();
	})
	.then(data =>{
		code="";
		data.forEach(function(val,index){
			 code += `${index} 번째정보 <br>`;
			 code += `이름 : ${val.name} <br>`;
			 code += `주소 : ${val.addr} <br>`;
			 code += `전화번호 : ${val.tel} <br><br>`;
		})
		
		$('#result4').html(code);
	})
}

objproc = () =>{
	fetch("../0117/obj.jsp")
	.then(resp =>{
		return resp.json();
	})
	.then(data =>{
		//출력 내용 완성
		code = `이름 : ${data.name} <br>`;
			 code += `주소 : ${data.addr} <br>`;
			 code += `전화번호 : ${data.tel} <br>`;
		
		//출력
		$('#result3').html(code);
	})
}

arrproc = () =>{
	fetch("../0117/arr.jsp")
	.then((response)=>{
		return response.json();
	})
	.then(data =>{
		code = "<ol>";
		data.forEach((val,index)=>{
			code += "<li>" + val + "</li>";
		})
		code += "</ol>"
		
		$('#result2').html(code);
	})//배열
}


textproc = () =>{
	let promi = fetch('http://192.168.142.33/jqpro/0117/text.jsp',{
		mode : 'cors'
	})
	.then(function(resp){
		console.log("resp",resp);
		
		return resp.text();
	})
	.then(data =>{
		str = data.split("/");
		
		//str배열을 이용해서 출력
/* 		str.forEach((vs , index) =>{
			
		}) */
		code="<ul>"
		$.each(str, function(i,val){
			code += "<li>" + str[i] + "</li>"
		})
		code += "<ul>";
		$('#result1').html(code);
	})
}
</script>
</head>
<body>

<div class="box">
<h4></h4>
<input type ="button" value="text" onclick="textproc()">
<input type ="button" value="arr" onclick="arrproc()">
<input type ="button" value="jsonobj" onclick="objproc()">
<input type ="button" value="jobarr" onclick="obarrproc()">
<br><br>
<div id="content">
<div id="result1" class="res"></div>
<div id="result2" class="res"></div>
<div id="result3" class="res"></div>
<div id="result4" class="res"></div>

</div>
</div>
</body>
</html>